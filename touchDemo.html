<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1 user-scalable=0"/>
    <title>html5单页滑动</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        #inner {
            width: 80%;
            overflow: hidden;
            background: #f67d42;
            margin: auto;
            position: relative;
        }
    </style>
</head>
<body>
<div id="inner">
    123<br> 123<br> gag<br> af<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br>
    123<br> yryyr<br> ryry<br> 123<br> 123<br> 123<br> 123<br> 123<br> sdff<br> fef<br> 123<br> hr<br> hrh<br>
    5y<br> 123<br> er<br> ert<br> 123<br> rgdgdg<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br>
    gfgfgfgfgfgf<br> sdsdsdsdsdsd<br> sf<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br>
    gdggdgdg<br> 123<br> drgdrgd<br> 123<br> 123<br> 123<br> yuyuyuyuyuy<br> hjkhjkhkhkhjkhkh<br> kjkjk<br>123<br>
    123<br> gag<br> af<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br>
    yryyr<br> ryry<br> 123<br> 123<br> 123<br> 123<br> 123<br> sdff<br> fef<br> 123<br> hr<br> hrh<br> 5y<br>
    123<br> er<br> ert<br> 123<br> rgdgdg<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> gfgfgfgfgfgf<br>
    sdsdsdsdsdsd<br> sf<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> gdggdgdg<br> 123<br>
    drgdrgd<br> 123<br> 123<br> 123<br> yuyuyuyuyuy<br> hjkhjkhkhkhjkhkh<br> kjkjk<br>
    123<br> 123<br> gag<br> af<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br>
    123<br> yryyr<br> ryry<br> 123<br> 123<br> 123<br> 123<br> 123<br> sdff<br> fef<br> 123<br> hr<br> hrh<br>
    5y<br> 123<br> er<br> ert<br> 123<br> rgdgdg<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br>
    gfgfgfgfgfgf<br> sdsdsdsdsdsd<br> sf<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br>
    gdggdgdg<br> 123<br> drgdrgd<br> 123<br> 123<br> 123<br> yuyuyuyuyuy<br> hjkhjkhkhkhjkhkh<br> kjkjk<br>123<br>
    123<br> gag<br> af<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br>
    yryyr<br> ryry<br> 123<br> 123<br> 123<br> 123<br> 123<br> sdff<br> fef<br> 123<br> hr<br> hrh<br> 5y<br>
    123<br> er<br> ert<br> 123<br> rgdgdg<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> gfgfgfgfgfgf<br>
    sdsdsdsdsdsd<br> sf<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> 123<br> gdggdgdg<br> 123<br>
    drgdrgd<br> 123<br> 123<br> 123<br> yuyuyuyuyuy<br> hjkhjkhkhkhjkhkh<br> kjkjk<br>
</div>

<script>
    var startY, y  //设一个全局变量记录上一次内部块滑动的位置
    var inner = document.getElementById("inner");
    function touchSatrt(e) {//触摸
        //e.preventDefault();
        var touch = e.touches[0];
        startY = touch.pageY;   //刚触摸时的坐标
    }
    function touchMove(e) {//滑动
        //e.preventDefault();
        var touch = e.touches[0];
        y = touch.pageY - startY;//滑动的距离
        inner.style.webkitTransform = 'translate(' + 0 + 'px, ' + y + 'px)';  //用css3的方式
        //搜索框下拉超过60px并且滚动条在顶部才需要更新
        if (y > 60 && document.body.scrollTop===0 ) {
            //更新
            console.log('更新')
        }
        //inner.style.top =  offsetY + y + "px"; //加上初始的位置
    }
    function touchEnd(e) {//手指离开屏幕
        //e.preventDefault();
        inner.style.webkitTransform = 'translate(' + 0 + 'px, ' + 0 + 'px)';  //用css3的方式
        //inner.style.top = offsetY + "px";//跟上面的inner top 配套
        //aboveY = parseInt(inner.style.top);//touch结束后记录内部滑块滑动的位置 在全局变量中体现 一定要用parseInt()将其转化为整数字;
    }//
    document.getElementById("inner").addEventListener('touchstart', touchSatrt, false);
    document.getElementById("inner").addEventListener('touchmove', touchMove, false);
    document.getElementById("inner").addEventListener('touchend', touchEnd, false);
</script>
</body>

</html>